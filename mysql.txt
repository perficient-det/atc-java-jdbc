CREATE DATABASE PETS;

USE PETS;

-- CREATE PET_OWNER TABLE
CREATE TABLE PET_OWNER(
    OWNER_ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    LAST_NAME VARCHAR(50),
    FIRST_NAME VARCHAR(50),
    ZIP_CODE INT,
    DATE_OF_BIRTH DATE
);

-- PUT DATA INTO PET_OWNER
INSERT INTO PET_OWNER (LAST_NAME,
 FIRST_NAME,
 ZIP_CODE,
 DATE_OF_BIRTH)
VALUES ('KELLY','JESSICA',63051,
 CONVERT("1985-07-18",DATE));
 
 INSERT INTO PET_OWNER (LAST_NAME,
 FIRST_NAME,
 ZIP_CODE,
 DATE_OF_BIRTH)
VALUES ('BROOKS','DALE',63051,
 CONVERT("1934-10-07",DATE));
 
-- UDPATE SOME VALUE(S) WITHIN PET_OWNER
 update pets.pet_owner 
set ZIP_CODE = 12345
where OWNER_ID = 1;

-- REMOVE ROW(S) FROM PET_OWNER
delete from pets.pet_owner
WHERE OWNER_ID = 2;

-- INSERT ANOTHER ROW, NOTE WE DO NOT RESUSE ID ON AN AUTO_INCREMENT
 INSERT INTO PET_OWNER (LAST_NAME,
 FIRST_NAME,
 ZIP_CODE,
 DATE_OF_BIRTH)
VALUES ('BROOKS','DALE',63051,
 CONVERT("1934-10-07",DATE));
 
-- TABLE WITH CATS
-- WE'LL COME BACK TO THE IMPORTANCE OF THE FK
 
  CREATE TABLE CATS(
  CAT_ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  OWNER_ID INT,
  NAME VARCHAR(50),
  BREED VARCHAR(50),
  constraint FK_PET_OWNER foreign key (OWNER_ID) references PET_OWNER(OWNER_ID)
  );
  
    CREATE TABLE DOG(
  DOG_ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  OWNER_ID INT,
  NAME VARCHAR(50),
  BREED VARCHAR(50),
  constraint FK_PET_OWNER_DOG foreign key (OWNER_ID) references PET_OWNER(OWNER_ID)
  );
  
 -- INSERT DATA
  insert into cats (OWNER_ID, NAME, BREED)
 values (1, "Red", "Shorthair");
insert into cats (OWNER_ID, NAME, BREED)
 values (1, "Cassie", "Shorthair");
 
-- NOTE, THIS FAILS.  WHY?  BECAUSE OF THE FK.
 insert into cats (OWNER_ID, NAME, BREED)
 values (87, "Red", "Shorthair");
 
-- JOIN, NOTE CONDITION **MUST** MATCH
 select *
from pet_owner po join cats c
 on po.OWNER_ID = c.OWNER_ID 
 
-- LEFT OUTER JOIN, WE RETURN THE "LEFT" SIDE ALWAYS, RIGHT IS POPULATED ONLY IF MATCH
 select *
from pet_owner po left outer join cats c
 on po.OWNER_ID = c.OWNER_ID 